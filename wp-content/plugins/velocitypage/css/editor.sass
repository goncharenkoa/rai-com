@import "compass"
$rows: sprite-map("rows/*.png", $layout: horizontal)

.vp-editable.vp-inline
	display: inline
	word-wrap: normal
	&:focus
		outline-color: transparent
		outline-style: none

.vp-clearfix:after
	content: ""
	display: table
	clear: both !important

.vp-save-page
	display: none

%area-controls
	left: 50%
	width: 140px
	margin-left: -70px
	height: 24px
	white-space: nowrap

.sortable-placeholder
	border: 2px dashed #aaa
	+border-radius( 3px )
	background: #f5f5f5

.item-area-wrap
	position: relative
	.controls-wrap-item-area
		@extend %area-controls
		bottom: -25px
		&.vp-empty
			display: block
			bottom: 50%
			margin-bottom: -15px


.row-area-wrap
	position: relative
	.controls-wrap-row-area
		@extend %area-controls
		bottom: -51px
		&.vp-empty
			display: block
			bottom: 50%
			margin-bottom: -15px

.row-wrap
	.row
		border: 1px solid transparent
		position: relative
		+transition-property(all)
		+transition-duration(0s)
		&:before,
		&:after
			content: ""
			display: table
		&:after
			clear: both !important
	&.hovered .row,
	&.ui-sortable-helper .row
		border: 1px solid #eee
		+transition-property(all)
		+transition-duration(0s)
	.controls-wrap-row
		width: 25px
		+border-top-left-radius( 0 )
		+border-bottom-left-radius( 0 )
		top: -1px
		right: -25px
		& div.vp-more
			display: none
			position: absolute
			top: -1px
			right: 23px
			background: #eee
			padding: 3px 1px 3px 4px
			border: 1px solid #eee
			+border-top-left-radius( 3px )
			+border-bottom-left-radius( 3px )
	&.ui-sortable-helper .controls-wrap-row
		display: block
.row
	zoom: 1

.item-wrap
	border: 1px solid transparent
	position: relative
	&.hovered,
	&.ui-sortable-helper
		border: 1px solid #eee
	.controls-wrap-item
		width: 25px
		+border-top-right-radius( 0 )
		+border-bottom-right-radius( 0 )
		top: -1px
		left: -25px
		&.vp-round-corner
			+border-bottom-right-radius( 3px )
		& div.vp-more
			display: none
			position: absolute
			top: -1px
			left: 23px
			background: #eee
			padding: 3px 4px 3px 1px
			border: 1px solid #eee
			+border-top-right-radius( 3px )
			+border-bottom-right-radius( 3px )
	&:before,
	&:after
		content: ""
		display: table
	&:after
		clear: both !important
.item-wrap
	zoom: 1

h1,
h2,
h3,
h4,
.field-wrap
	.vp-align-center &
		text-align: center !important
	.vp-align-left &
		text-align: left !important
	.vp-align-right &
		text-align: right !important
	.vp-mask
		top: 0
		left: 0
		position: absolute

.field-wrap
	iframe.twitter-tweet
		margin: 0 auto !important

.controls-wrap
	font: normal 16px/16px "Open Sans", sans-serif
	-webkit-text-stroke: 0
	display: none
	text-align: center
	position: absolute
	z-index: 99999
	background: #eee
	border: 1px solid #eee
	+border-radius( 3px )
	padding: 3px
	a,
	a:link,
	a:visited,
	a:active
		color: #666
		border-bottom: none
		text-decoration: none
	a:hover
		color: #222
	.vp-sort-handle:hover
		cursor: move
	.vp-remove
		position: relative
		top: -1px
	vp-control-row
		display: block
		width: auto
		white-space: nowrap
		vp-control-row-group
			margin-left: 15px

.vp-block
	display: block

.mce-edit-focus
	outline: none !important

%dark-button
	font: normal 13px/20px "Open Sans", sans-serif
	text-align: center
	text-transform: none
	background: #333
	margin: 10px !important
	padding: 0
	+border-radius( 2px )
	border: 1px solid #000
	color: #fff
	a
		padding: 5px
		text-decoration: none
		color: #fff
		width: 100%
		display: inline-block
		border-bottom: none
		-webkit-text-stroke: 0

.vp-choose-type
	clear: both
	list-style: none !important
	li
		@extend %dark-button
		list-style-type: none !important
		float: left
		width: 80px
		.row > &
			width: auto
			padding: 7px
	&.vp-switching-types li.vp-new-only
		display: none
	.row > &
		a
			display: block
			height: 40px
			font-size: 0
			width: 70px
			background-image: sprite-url($rows)
			background-repeat: repeat-y
			&[data-slug="split-13-13-13"]
				background-position: sprite-position($rows, split-13-13-13)
			&[data-slug="split-12-12"]
				background-position: sprite-position($rows, split-12-12)
			&[data-slug="split-13-23"]
				background-position: sprite-position($rows, split-13-23)
			&[data-slug="split-23-13"]
				background-position: sprite-position($rows, split-23-13)
			&[data-slug="full-width"]
				background-position: sprite-position($rows, full-width)
			&[data-slug="split-14-14-12"]
				background-position: sprite-position($rows, split-14-14-12)
			&[data-slug="split-14-12-14"]
				background-position: sprite-position($rows, split-14-12-14)
			&[data-slug="split-12-14-14"]
				background-position: sprite-position($rows, split-12-14-14)

.vp-choose-image
	@extend %dark-button

.item-area-item-wrap.item-count-0
	min-height: 1px


#velocity-page-wrapper.vp-editing
	margin-bottom: 44px
	.item-wrap-slug-html,
	.item-wrap-slug-shortcode
		min-height: 40px
	.row-area-row-wrap.row-count-0,
	.item-area-item-wrap.item-count-0
		min-height: 100px
	&:hover
		.row-area-row-wrap.row-count-0,
		.item-area-item-wrap.item-count-0
			border: 1px dashed #ddd

textarea.vp-html,
textarea.vp-media,
textarea.vp-shortcode
	min-height: 100px
	max-width: 100%
	width: 100%

// ===============
// TinyMCE Toolbar
// ===============

#vp-tinymce-toolbar
	z-index: 99999
	body.dragging &
		display: none !important
	button:hover
		background-color: transparent !important
	> .mce-panel
		border: 1px solid #aaa
		+border-radius( 2px )
	.mce-toolbar-grp
		background: #aaa
		background-image: none
	.vp-arrow-up
		width: 0
		height: 0
		margin: 0 auto
		border-color: #aaa transparent
		border-style: solid
		border-width: 0 15px 10px 15px

// =================
// WordPress Toolbar
// =================
//#wp-admin-bar-velocitypage > div.ab-item > img
#wp-admin-bar-velocitypage
	> a > img
		width: 20px
		position: relative
		top: -2px
		vertical-align: middle
		display: inline-block
	&.vp-hover a
		background: #32373c
		color: #45bbe6
	.vp-hidden
		display: none


// =============
// Page Controls
// =============

.vp-quick-controls,
.vp-page-controls
	color: #eee
	position: fixed
	top: 32px
	right: 0
	z-index: 99999
	a,
	a:link,
	a:visited
		-webkit-text-stroke: 0
		border-bottom: none
		color: #eee
		text-decoration: none
		+transition-property(all)
		+transition-duration(0s)
	a:hover
		color: #2ea2cc
		+transition-property(all)
		+transition-duration(0s)

.vp-quick-controls
	font: normal 16px/32px "Open Sans", sans-serif
	list-style: none
	margin: 0
	li
		padding: 0 5px
		background: #222
		line-height: 32px
		float: left

.vp-page-controls
	font: normal 18px/32px "Open Sans", sans-serif
	background: #32373c
	+border-bottom-left-radius( 2px )
	.vp-panel-cancel
		position: fixed
		right: 10px
		top: 32px
		line-height: 40px
	.vp-panel-section
		border-bottom: 1px solid #222
		padding: 30px 10px
		&:last-of-type
			border-bottom: 0
	.vp-panel
		float: left
		min-width: 300px
		max-width: 350px
		font: normal 14px/24px "Open Sans", sans-serif
		ul
			margin: 0
			padding: 0
			&:after
				content: ""
				display: table
				clear: both !important
		li
			list-style: none
			max-width: 100px
			margin-right: 10px
			float: left
			span
				font-size: 12px
				display: block
				width: 100px
				text-align: center
				margin-bottom: 15px
		select
			max-width: 200px
			float: left
			padding: 5px
			font: normal 14px/24px "Open Sans", sans-serif
		button[role=submit],
		input[type=submit]
			@extend %dark-button
			margin: 0 !important
			padding: 5px
			background: rgb(233, 56, 40)
			border: 1px solid #777
			color: white
			font-weight: bold
		p
			clear: both
		p:after
			content: ""
			display: table
			clear: both !important
		h1, h2
			color: #fff
			margin: 0
		h1
			font: normal 20px/32px "Open Sans", sans-serif
			font-size: 20px
			padding: 10px
			border-bottom: 1px solid #222
			+background-image(linear-gradient(to right, #222, #32373c 50%, #32373c))
		h2,
		label
			font: normal 16px/32px "Open Sans", sans-serif
			padding-bottom: 10px
			display: block
	.vp-panel-body
		overflow-y: scroll
	.vp-message
		font: normal 16px/32px "Open Sans", sans-serif
		float: left
		text-indent: 6px
		color: #aaa
		background: #222
		padding: 0 5px
		min-height: 1px // Hack to keep it from collapsing


// =======
// Spacers
// =======
.vp-spacer-value
	width: 40px
	padding: 0
	font: normal 12px/12px "Open Sans", sans-serif
.vp-spacer
	font: normal 12px/12px "Open Sans", sans-serif
	#velocity-page-wrapper.vp-editing &
		opacity: 0
		&:hover
			opacity: 1
	height: 40px
	.ui-slider
		position: relative
		text-align: left
		border-top: 1px solid #777
		.ui-slider-handle
			border: 1px solid #777
			background: #777
			+border-radius(3px)
			position: absolute
			z-index: 2
			width: 16px
			height: 16px
			cursor: default
			outline: none
			&:hover
				cursor: ew-resize
		.ui-slider-range
			position: absolute
			z-index: 1
			display: block
			border: 0
			background-position: 0 0
		&.ui-state-disabled
			.ui-slider-handle, .ui-slider-range
				filter: inherit
	.ui-slider-horizontal
		height: 1px
		margin: 5px 10px
		.ui-slider-handle
			top: -8px
			margin-left: -8px
		.ui-slider-range
			top: 0
			height: 100%
		.ui-slider-range-min
			left: 0
		.ui-slider-range-max
			right: 0

	.ui-slider-vertical
		width: .8em
		height: 100px
		.ui-slider-handle
			left: -0.3em
			margin-left: 0
			margin-bottom: -0.6em
		.ui-slider-range
			left: 0
			width: 100%
		.ui-slider-range-min
			bottom: 0
		.ui-slider-range-max
			top: 0


// =====
// Forms
// =====



// ===========
// Image stuff
// ===========

.item-field-wrap-image .field-wrap
	font-size: 0
	img
		max-width: 100%
		display: inline-block

vp-image-link
	font-size: 14px
	display: none
	input
		width: 100%

vp-image
	max-width: 100%
	display: inline-block
	position: relative
	> img
		max-width: 100%
	> .ui-resizable-handle
		display: none !important
		border: 1px solid black
		width: 10px
		height: 10px
		position: absolute
		background: white
		z-index: 100000 !important
	&:hover > .ui-resizable-handle
		display: block !important
	> .ui-resizable-se
		right: 0
		bottom: 0
		&:hover
			cursor: se-resize
	> .ui-resizable-sw
		left: 0
		bottom: 0
		&:hover
			cursor: sw-resize

// ===================
// Typing and dragging
// ===================

#velocity-page-inner-wrapper.typing
	.controls-wrap
		display: none !important
	.row,
	.item-wrap,
	.item-area-item-wrap.item-count-0,
	.row-area-row-wrap.row-count-0
		border: 1px solid transparent !important

body.dragging
	.controls-wrap
		display: none !important

// ==============
// Fix Chrome Bug
// ==============

body
	-webkit-animation-duration: 0.1s
	-webkit-animation-name: fontfix
	-webkit-animation-iteration-count: 1
	-webkit-animation-timing-function: linear
	-webkit-animation-delay: 0.1s

@-webkit-keyframes fontfix
	from
		opacity: 1
	to
		opacity: 1
